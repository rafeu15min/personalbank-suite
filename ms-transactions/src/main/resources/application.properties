# ==========================================================
# 1. CONFIGURAÇÕES GERAIS DA APLICAÇÃO
# ==========================================================
quarkus.application.name=ms-transactions
quarkus.application.version=1.0.0
# Porta HTTP padrão para o primeiro serviço.
quarkus.http.port=8080

# ==========================================================
# 2. IMPORTAÇÃO DA CONFIGURAÇÃO COMPARTILHADA
# ==========================================================
# Importa as configurações das instituições (URLs, etc.) do arquivo central.
quarkus.config.import=${user.dir}/../config/banks.yml

# ==========================================================
# 3. CONFIGURAÇÃO DO BANCO DE DADOS (LENDO DO .ENV)
# ==========================================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:postgres}
quarkus.datasource.password=${DB_PASSWORD:postgres}
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/personalbank_db}

# Geração de schema para desenvolvimento.
quarkus.hibernate-orm.database.generation=drop-and-create

# ==========================================================
# 4. CONFIGURAÇÃO DO KAFKA CONSUMER (CANAL DE ENTRADA)
# ==========================================================
# Endereço dos servidores Kafka, lido do .env
kafka.bootstrap.servers=${KAFKA_BROKERS:localhost:9092}

# --- CANAL DE ENTRADA (CONSUMER) PARA SOLICITAÇÕES DE TRANSAÇÕES ---
# Este consumidor escuta um tópico genérico para iniciar a busca de transações.
# Pode ser acionado tanto pela carga inicial quanto por atualizações.
mp.messaging.incoming.solicitacoes-transacoes.connector=smallrye-kafka
mp.messaging.incoming.solicitacoes-transacoes.topic=solicitacoes.transacoes
mp.messaging.incoming.solicitacoes-transacoes.group.id=transaction-processor-group
mp.messaging.incoming.solicitacoes-transacoes.value.deserializer=io.quarkus.kafka.client.serialization.JsonObjectDeserializer
mp.messaging.incoming.solicitacoes-transacoes.json.value.type=br.com.PersonalBank.common.event.InitialLoadEvent